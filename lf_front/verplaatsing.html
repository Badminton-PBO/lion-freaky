<!DOCTYPE html>
<html id="printfull">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>PBO Verplaatsing competitie match</title>
		<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
		<link rel="icon" href="images/favicon.ico" type="image/x-icon">
		
		<!-- JQuery -->
		<script type="text/javascript" src="libs/js/jquery-1.11.1.min.js"></script>	
		<script type="text/javascript" src="libs/jquery-ui-1.11.1.custom/jquery-ui.min.js"></script>	

		<!-- Knockoutjs -->
		<script type="text/javascript" src="libs/js/knockout-3.2.0.js"></script>
		<script type="text/javascript" src="libs/knockout-sortable-master/build/knockout-sortable.min.js"></script>	
		
		<!-- Bootstrap -->
		<script type="text/javascript" src="libs/bootstrap-3.3.1-dist/js/bootstrap.min.js"></script>
		<link href="libs/bootstrap-3.3.1-dist/css/bootstrap.min.css" rel="stylesheet">		

		<!-- DateTimePicker stuff -->
		<script type="text/javascript" src="libs/js/moment-with-locales.min.js"></script>
		<script type="text/javascript" src="libs/js/bootstrap-datetimepicker-4.0.0/bootstrap-datetimepicker.min.js"></script>
		<link rel="stylesheet" href="libs/js/bootstrap-datetimepicker-4.0.0/bootstrap-datetimepicker.min.css" />
			
	</head>
	<body>
		<div class="container-fluid">
			<div class="row hidden-print">
				<div class="col-xs-10 hidden-xs">
					<a href="http://www.badminton-pbo.be/" target="_new"><img src="images/logo.png"></a>
				</div>
				<div class="col-xs-10 visible-xs">
					<a href="http://www.badminton-pbo.be/" target="_new"><img src="images/logo_noText.png"></a>
				</div>
			</div>
			<!-- ko if: !$root.chosenClub() -->
			<div class="well">
				<h1>Doelstelling</h1>
				Streamline verplaatsings aanvragen PBO competitie.
			</div>
			<!-- /ko -->
			<div class="row hidden-print">
				<div class="col-xs-12">
					<p>
						Kies je badmintonclub:
						<select data-bind="options: sampleClubs,
										   optionsText:'clubName',
										   value: chosenClub,
										   optionsCaption: 'Selecteer...'"></select>
					</p>
					<p data-bind="with: chosenClub">
						Kies je team:
						<select data-bind="options: teams.filter(function(team) { return team.type != 'LIGA'}),
										   optionsText: 'teamName',
										   value: $parent.chosenTeam,
										   optionsCaption: 'Selecteer...'"></select>
					</p>
					<div data-bind="if: $root.chosenTeam()">			
						<div id="matchListId" class="well well-sm">
							<table class="table table-bordered table-condensed">
								<thead>
										<tr>
											<th>Match</th>
											<th>Laatst vastgelegd tijdstip</th>
											<th>Status</th>
											<th>Actie bij</th>
										</tr>
								</thead>
								<tbody data-bind="foreach: availableMeetings">
									<tr>
										<td><a data-bind="click: $root.chosenMeeting"><span data-bind="text:hTeam"></span> - <span data-bind="text:oTeam"></span></a></td>
										<td><span data-bind="text:dateLayout"></span> <span data-bind="text:hourLayout"></span></td>
										<td><span data-bind="text: status"></span></td>
										<td><span data-bind="text: actionFor"></td>
									</tr>
								</tbody>							
							</table>							
						</div>
					</div>
				</div>
				<div class="col-xs-12" data-bind="with: $root.chosenMeeting()">
					<div>
						<div class="row row-fluid">
							<div class="col-xs-12">
								<h2>Verplaatsing aanvraag <span data-bind="text:hTeam"></span> - <span data-bind="text:oTeam"></span></h2>
							</div>
							<div class="col-xs-12 col-sm-4" style="padding-top:10px; padding-bottom:15px">
								<div id="reset" class='label label-default' style='font-size:30px' data-bind="visible: isAddProposalAllowed">
									<a href="#" data-bind="click: $root.addNewProposal">
										<span class="glyphicon glyphicon-plus"></span>
									</a>
								</div>	
								<div id="save" class='label label-default' style='font-size:30px;margin-right:10px;'>
									<a href="#" data-bind="click: $root.save">
										<span class="glyphicon glyphicon-floppy-save">	
									</a> 							
								</div>																
							</div>						
						</div>
						<div class="row-fluid">							
							<table class="table table-condensed">
								<thead>
									<tr>
										<th class="col-md-2">Voorstel van</th>
										<th class="col-md-4">Tijdstip</th>
										<th class="col-md-2">Beschikbaarheid <span data-bind="text:hTeam"></span></th>
										<th class="col-md-2">Beschikbaarheid <span data-bind="text:oTeam"></span></th>
										<th class="col-md-1">Uitgekozen</th>
										<th class="col-md-1">&nbsp;</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: proposedChanges">
									<tr>
										<td>
											<span data-bind="text:requestedByTeam"></span>
										</td>
										<td>
											<!-- ko ifnot: (requestedByTeam() == $root.chosenTeam().teamName && acceptedState() == '-') -->
												<span data-bind="text: proposedDateTimeLayout"></span>
											<!-- /ko -->
											
											<!-- ko if: (requestedByTeam() == $root.chosenTeam().teamName && acceptedState() == '-') -->
											<a class="input-group date">
											   <input type="text" class="form-control" data-bind="datetimepicker: proposedDateTime" />
											   <span class="input-group-addon">
													<span class="glyphicon glyphicon-calendar"></span>
											   </span>
											</a>																																
											<!-- /ko -->
											
										</td>
										<td>
											<!-- ko if: requestedByTeam() == $parent.hTeam -->
											MOGELIJK
											<!-- /ko -->
											<!-- ko ifnot: requestedByTeam() == $parent.hTeam -->
											<select data-bind="options:$root.proposalAcceptedStates, value: acceptedState, enable: requestedByTeam() != $root.chosenTeam().teamName && !(finallyChosen())"></select>
											<!-- /ko -->
										</td>
										<td>
											<!-- ko if: requestedByTeam() == $parent.oTeam -->
											MOGELIJK
											<!-- /ko -->
											<!-- ko ifnot: requestedByTeam() == $parent.oTeam -->
											<select data-bind="options:$root.proposalAcceptedStates, value: acceptedState, enable: requestedByTeam() != $root.chosenTeam().teamName && !(finallyChosen())"></select>
											<!-- /ko -->

										</td>
										<td>
											<input type="checkbox" data-bind="checked:finallyChosen, enable: isCheckFinalAllowed"/>
										</td>
										<td>
											<!-- ko if: (requestedByTeam() == $root.chosenTeam().teamName && acceptedState() == '-') -->
											<button class="button" data-bind="click: $parent.removeProposal">
												<span class="glyphicon glyphicon-remove"></span>
											</button>
											<!-- /ko -->
										</td>
									</tr>
								</tbody>															
							</table>										
						</div>														
						<div class="row-fluid">
							<div class="well well-sm">
								<h2>Commentaar</h2>
								<table class="table table-condensed">
									<thead>
										<tr>
											<th class="col-md-3">Door</th>
											<th class="col-md-9">Commentaar</th>
										</tr>
									</thead>
									<tbody>
										<!-- ko foreach: comments -->
										<tr>
											<td>
												<span data-bind="text:owner"></span>,<br><span data-bind="text:dateTime"></span>
											</td>
											<td>
												<span data-bind="text:text"></span>
											</td>
										</tr>
										<!-- /ko -->
										<tr>
											<td>
												Voeg nieuw commentaar toe:
											</td>
											<td>
												<textarea data-bind="textInput: $root.newCommentText"></textarea>
												<div class='label label-default' style='font-size:30px'>
													<a href="#" data-bind="click: $root.addNewComment">
														<span class="glyphicon glyphicon-plus"></span>	
													</a>
												</div>	
											</td>
										</tr>
									</tbody>															
								</table>																
							</div>
						</div>
					</div>
				</div>				
			</div>
		</div>
		<script type="text/javascript" src="builderVerplaatsing.js" charset="utf-8"></script>	
	</body>	
</html>
