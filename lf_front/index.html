<html id="printfull">
	<head>
		<!-- JQuery -->
		<script type="text/javascript" src="libs/js/jquery-2.1.1.min.js"></script>	
		<script type="text/javascript" src="libs/jquery-ui-1.11.1.custom/jquery-ui.min.js"></script>	

		<!-- Knockoutjs -->
		<script type="text/javascript" src="libs/js/knockout-3.2.0.js"></script>
		<script type="text/javascript" src="libs/knockout-sortable-master/build/knockout-sortable.min.js"></script>	

		
		<!-- Bootstrap -->
		<script type="text/javascript" src="libs/bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>
		<link href="libs/bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">		
		
		<script>
			function togglePlayers(x) {
				$(x).next().collapse('toggle');
				if ($(x).next().is(':visible')) {
				 $("html, body").animate({scrollTop: $(x).next().offset().top});
				}	
			}
		</script>
		
		<style type="text/css">
.doubleGame {
	border: solid 3px #666;
	width: 400px;
	height: 60px;
	background-color: #666;
	margin: 5px;
	padding: 2px;
	border-radius: 5px;
	box-shadow: 2px 2px 2px #999;
}

.singleGame {
	border: solid 3px #666;
	width: 400px;
	height: 30px;
	background-color: #666;
	margin: 5px;
	padding: 2px;
	border-radius: 5px;
	box-shadow: 2px 2px 2px #999;
}

.doubleTitleGame {
	padding: 20px 0px 0px 10px;
}

.singleTitleGame {
	padding: 12px;
}

print2pdf
/* unvisited link */
#print a:link, #print a:visited, #print a:hover, #print a:active, #print2pdf a:link, #print2pdf a:visited, #print2pdf a:hover, #print2pdf a:active {
    color: #005500;
}

.playerDetail {
	font-size:10px;
}

#message, #error {
    font-size: 1em;
    margin-top: 10px;
    background-color: orange;
    color: #444;
    padding: 2px;
    width: 500px;
    text-align: center;
    border-radius: 5px;
    box-shadow: 2px 2px 2px #999;
}

#error {
    background-color: #ff3333;
    color: #ddd;   
}		

        .trash {
            background-color: #000;
            width: 300px;
            height: 50px;
            background-color: #AAA;
        }

#ploegopstelling.affix {
    position: fixed;
    top: 0;
    width: 650px;
  }


		</style>
		
			
	</head>
	<body>
		<div class="container">
			<div class="row hidden-print">
					<img src="http://pbo.kwal.org/pbo/wp/wp-content/themes/classico-catalyst/css/images/logo.png">
			</div>
			<div class="row hidden-print">
				<div class="col-md-5">
					<p>
						Kies je badmintonclub:
						<select data-bind="options: sampleClubs,
										   optionsText:'clubName',
										   value: chosenClub,
										   optionsCaption: 'Selecteer...'"></select>
						
					</p>
					<p data-bind="with: chosenClub">
						Kies je team:
						<select data-bind="options: teams,
										   optionsText: 'teamName',
										   value: $parent.chosenTeamName,
										   optionsCaption: 'Selecteer...'"></select>
					</p>			
					<p data-bind="with: chosenTeam">
						Kies een ontmoeting:
						<select data-bind="options: meetings,
										   optionsText: 'fullMeetingLayout',
										   value: $root.chosenMeeting,
										   optionsCaption: 'Selecteer...'"></select>
					</p>						
					<p data-bind="if : $root.chosenMeeting()">
						<table class="table table-bordered table-condensed">
							<thead>
									<tr>
										<td>Speler</td>
										<td class="playerDetail">vast index <span data-bind="text: $root.chosenTeam().rankingLayout()"></span></td>
										<td class="playerDetail">var. index <span data-bind="text: $root.chosenTeam().rankingLayout()"></span></td>
									</tr>
							</thead>
							<tbody data-bind="foreach: availablePlayers">
								<tr data-bind="draggable: $data">
									<td><span class="glyphicon glyphicon-user"></span> <span data-bind="text: fullName"></span></td>
									<td data-bind="text: fixedRankingLayout($root.chosenTeam().teamType)" class="playerDetail"></td>
									<td data-bind="text: rankingLayout($root.chosenTeam().teamType)" class="playerDetail"></td>
								</tr>
							</tbody>							
						</table>
					</p>
					<p data-bind="if: ($root.chosenMeeting()  && ($root.notAllowedPlayersOtherBaseTeam().length > 0 || $root.notAllowedPlayersOnBaseMaxPlayerIndex().length > 0))">
						<button id="nonplayersbutton" type="button" class="btn btn-primary" onclick="togglePlayers(this);">Niet opstelbare spelers &raquo;</button>						
						<table class="table table-bordered table-condensed collapse">
							<tbody>
								<!-- ko foreach: notAllowedPlayersOtherBaseTeam -->
								<tr data-toggle="tooltip" data-placement="right" title="Op papier in team van gelijke of hogere divisie">
									<td data-bind="text: fullName"></td>
								</tr>
								<!-- /ko -->
								<!-- ko foreach: notAllowedPlayersOnBaseMaxPlayerIndex -->
								<tr data-toggle="tooltip" data-placement="right" title="Vaste index hoger dan dat van basisspeler">
									<td><span data-bind="text: fullName"></span> (<span data-bind="text: fixedRankingLayout($root.chosenTeam().teamType)"></span>)</td>
								</tr>
								<!-- /ko -->								
							</tbody>							
						</table>						
					</p>
				</div>
				<div class="col-md-7 pull-right">
					<div id="ploegopstelling" data-spy="affix" data-offset-top="60">
						<div class="row">
							<div class="col-md-4">
								<h2>Ploegopstelling</h2>
							</div>
							<div class="col-md-4" style="padding-top:10px">
							<div class="row">								
							<!-- ko if: $root.chosenTeam() -->
								<!-- ko if: $root.chosenTeam().isFull() -->
								<div id="print" class='label label-default' style='font-size:30px;margin-right:10px;'>
									<a href="#" onclick="javascript:window.print()">
										<span class="glyphicon glyphicon-print">	
									</a> 							
								</div>
								<div id="print2pdf" class='label label-default' style='font-size:30px'>
									<a href="#" data-bind="click: print2pdf">
										<span class="glyphicon glyphicon-floppy-save">	
									</a> 							
								</div>
								<!-- /ko -->
								<!-- ko ifnot: $root.chosenTeam().isFull() -->
								<div id="print" class='label label-default' style='font-size:30px;margin-right:10px;'>
									<span class="glyphicon glyphicon-print"></span>	
								</div>
								<div id="print2pdf" class='label label-default' style='font-size:30px'>
									<a href="#" data-bind="click: print2pdf">
										<span class="glyphicon glyphicon-floppy-save"></span>	
									</a>
								</div>
								<!-- /ko -->
							<!-- /ko -->
							</div>
							</div>
							
							<div class="col-md-4" style="padding-top: 10px">
								<div id="trashCan" data-bind="sortable: {data: trash, afterMove: $root.handleTrash}">
									<div style="position: absolute;top: 25;left: 80;z-index: 10;">
										<span class="trashItem" data-bind="text: fullName"></span>			
									</div>							
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-4" data-bind="with:$root.chosenTeam"><span data-bind="text: teamTypeLayout()"></span>, Provenciaal</div>
							<div class="col-md-4" data-bind="with:$root.chosenTeam">Afdeling: <span data-bind="text: devision"></span></span></div>
							<div class="col-md-4" data-bind="with:$root.chosenTeam">Reek: <span data-bind="text: series"></span></div>
						</div>						
						<div class="row">
							<div class="col-md-4" data-bind="with:$root.chosenMeeting">Thuisploeg: <span data-bind="text: hTeam"></span></div>
							<div class="col-md-4" data-bind="with:$root.chosenMeeting">Bezoekers: <span data-bind="text: oTeam"></span></div>
							<div class="col-md-4" data-bind="with:$root.chosenMeeting">Datum/Uur: <span data-bind="text: dateLayout"></span>  <span data-bind="text: hourLayout"></span></div>
						</div>						
						<div class="row">
							<div id="error" data-bind="flash: lastError"></div>
						</div>
						<div class="row">
							<table class="table table-condensed">
								<thead>
									<tr>
										<th class="col-md-2">Discipline</th>
										<th class="col-md-8">Spelers</th>
										<th class="col-md-2">Index</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: games">
										<tr>
											<td style="padding:0px">
												<div data-bind="css: gameTitleCss()">
													<span class="label label-default" data-bind="text: id">									
												</div>
											</td>
											<td style="padding:0px">
												<div data-bind="sortable: {data : playersInGame, allowDrop: allowMorePlayers, beforeMove: $root.verifyAssignments, afterMove: $root.verifyAssignmentsAfterMove}, css: gameCss()">
													<div>													
														<span data-bind="text: fullName"></span>,
														<span data-bind="text: vblId"></span>,		
														<span data-bind="text: ranking($parent.gameType)"></span>=<span data-bind="text: index($parent.gameType)"></span>
													</div>																												
												</div>											
											</td>
											<td>
												<span data-bind="text: totalIndexWithLayout"></span>
											</td>										
										</tr>
								</tbody>
							</table>										
						</div>									
						<div class="row" data-bind="with: chosenTeam">	
							<div class="col-md-6">
								Teamindex papieren ploeg: <span data-bind="text: baseTeamIndex"></span>					
								<br>Spelers op papier:
								<ul data-bind="foreach: playersInBaseTeam">
									<li>
										<span data-bind="text: fullName"></span>,
										<span data-bind="text: fixedIndexInsideTeam($root.chosenTeam().teamType)"></span>
									</li>
								</ul>						
							</div>
							<div class="col-md-6">
								Teamindex effectieve ploeg: <span data-bind="text: effectiveTeamIndex"></span>
								<br>Effectieve spelers:
								<ul data-bind="foreach: effectivePlayersInTeam">
									<li>
										<span data-bind="text: fullName"></span>,
										<span data-bind="text: fixedIndexInsideTeam($root.chosenTeam().teamType)"></span>
									</li>
								</ul>						
							</div>							
						</div>
					</div>
				</div>
			</div>
			<div id="printhtml" class="row visible-print-inline">
				<h1 class="text-center">Ploeguitwisselingsformulier interclub competitie</h1>
				<div class="row">
					<div class="col-md-3" data-bind="with:$root.chosenTeam"><span data-bind="text: teamTypeLayout()"></span>, Provenciaal</div>
					<div class="col-md-3" data-bind="with:$root.chosenTeam">Afdeling: <span data-bind="text: devision"></span></span></div>
					<div class="col-md-3" data-bind="with:$root.chosenTeam">Reek: <span data-bind="text: series"></span></div>
					<div class="col-md-3" data-bind="with:$root.chosenMeeting">Datum/Uur: <span data-bind="text: dateLayout"></span>  <span data-bind="text: hourLayout"></span></div>
				</div>						
				<div class="row">					
					<table class="table table-bordered">
						<tr>
							<td><h2>Wedstrijd</h2></td>
							<td class="text-center" data-bind="with:$root.chosenMeeting"><h2><span data-bind="text: hTeam"></span></h2></td>
							<td class="text-center" data-bind="with:$root.chosenMeeting"><h2><span data-bind="text: oTeam"></span></h2></td>
						</tr>
					</table>
				</div>
				<div class="row" data-bind="if: $root.chosenMeeting()">
					<table class="table table-condensed table-bordered">
						<thead>
							<tr>
								<th class="col-md-2">Discipline</th>
								<th class="col-md-3">Naam</th>
								<th class="col-md-3">Voornaam</th>
								<th class="col-md-2">Lidnummer</th>
								<th class="col-md-1">Klassement</th>
							</tr>
						</thead>
						<tbody>								
							<!-- ko foreach: games -->		
								<!-- ko foreach: playersInGame -->
									<tr>
										<!-- ko if: ($index() === 0) -->
										<td style="padding:0px" data-bind="attr:{rowspan: $parent.playersInGame().length}"><span data-bind="text: $parent.id"></td>
										<!-- /ko -->
										<td style="padding:0px"><span data-bind="text: firstName"></span></td>
										<td style="padding:0px"><span data-bind="text: lastName"></span></td>
										<td style="padding:0px"><span data-bind="text: vblId"></span></td>
										<td style="padding:0px"><span data-bind="text: ranking($parent.gameType)"></span></td>
									</tr>
								<!-- /ko -->
							<!-- /ko -->																	
							<tr>
								<td rowspan="3">invallers</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
							</tr>
							<tr>									
								<td>&nbsp;</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
							</tr>
							<tr>									
								<td>&nbsp;</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
							</tr>								
						</tbody>
					</table>					
				</div>
			</div>			
		</div>
		<div id="printframe"style="display:none">
			<iframe src="print2PdfForm.html" id="iPrint" style="display:none" frameborder="0">
			</iframe>
		</div>
		<script type="text/javascript" src="builder.js"></script>	
	</body>	
</html>
